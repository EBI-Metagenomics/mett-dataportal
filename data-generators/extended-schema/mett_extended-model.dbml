Table species {
	id serial [ pk, unique ]
	scientific_name text [ not null ]
	common_name text
	acronym text
	taxonomy_id integer
}

Table strain {
	id serial [ pk, unique ]
	species_id integer [ not null ]
	strain_id text [ not null ]
	isolate_name text [ not null ]
	assembly_name text
	assembly_accession text
	fasta_file text
	gff_file text
	type_strain boolean [ default: false ]

	indexes {
		(species_id) [ name: 'strain_species_idx' ]
	}
}

Table strain_contigs {
	id serial [ pk, unique ]
	strain_id integer [ not null ]
	seq_id text [ not null ]
	length integer [ not null ]

	indexes {
		(strain_id) [ name: 'strain_contigs_strain_idx' ]
	}
}

Table genomic_region {
	id serial [ pk, unique ]
	strain_id integer [ not null ]
	start_pos integer [ not null ]
	end_pos integer [ not null ]
	strand char(1)
	region_type text [ not null ]
	name text
	description text
	uniprot_id text

	indexes {
		(strain_id, start_pos, end_pos) [ name: 'genomic_region_strain_position_idx' ]
		(region_type) [ name: 'genomic_region_type_idx' ]
		(uniprot_id) [ name: 'genomic_region_uniprot_idx' ]
	}
}

Table gene {
	id serial [ pk, unique ]
	locus_tag text [ not null ]
	gene_id text
	gene_name text
	alias text
	product text
	product_source text
	start_pos integer [ not null ]
	end_pos integer [ not null ]
	strand char(1)
	gene_biotype text
	strain_id integer [ not null ]
	genomic_region_id integer
	protein_id integer

	indexes {
		(strain_id, locus_tag) [ name: 'gene_strain_locus_idx' ]
		(strain_id, start_pos, end_pos) [ name: 'gene_position_idx' ]
		(protein_id) [ name: 'gene_protein_idx' ]
		(genomic_region_id) [ name: 'gene_genomic_region_idx' ]
	}
}

Table protein {
	id serial [ pk, unique ]
	uniprot_id text [ not null, unique ]
	protein_sequence text
	protein_full_name text
}

Table gene_dbxref {
	id serial [ pk, unique ]
	gene_id integer [ not null ]
	database_name text [ not null ]
	accession text [ not null ]
	description text

	indexes {
		(gene_id, database_name, accession) [ name: 'gene_dbxref_unique_idx', unique ]
		(database_name) [ name: 'gene_dbxref_database_idx' ]
	}
}

Table gene_ontology_terms {
	id serial [ pk, unique ]
	gene_id integer [ not null ]
	ontology_type text [ not null ]
	ontology_id text [ not null ]
	ontology_description text

	indexes {
		(gene_id, ontology_type, ontology_id) [ name: 'gene_ontology_unique_idx', unique ]
	}
}

Table media {
	id serial [ pk, unique ]
	name text [ not null ]
	description text
	ph double
	notes text
}

Table experimental_condition {
	id serial [ pk, unique ]
	name text [ not null ]
	description text
	media_id integer
	temperature double
	ph double
	oxygen_level text
	other_conditions text
}

Table SP1_gene_essentiality {
	id serial [ pk, unique ]
	gene_id integer [ not null ]
	genomic_region_id integer [ not null ]
	experimental_condition_id integer
	tas_in_locus integer
	tas_hit double
	essentiality_call text [ not null ]

	indexes {
		(gene_id, genomic_region_id) [ name: 'SP1_gene_essentiality_unique_idx', unique ]
	}
}

Table SP1_gene_fitness_data {
	id serial [ pk, unique ]
	gene_id integer [ not null ]
	genomic_region_id integer [ not null ]
	experimental_condition_id integer
	contrast text [ not null ]
	lfc double [ not null ]
	fdr double [ not null ]
	replicate_id text

	indexes {
		(gene_id, genomic_region_id, experimental_condition_id, contrast) [ name: 'SP1_gene_fitness_data_search_idx' ]
	}
}

Table SP1_gene_fitness_correlation {
	id serial [ pk, unique ]
	gene1_id integer [ not null ]
	gene2_id integer [ not null ]
	genomic_region_id_1 integer [ not null ]
	genomic_region_id_2 integer [ not null ]
	experimental_condition_id integer
	correlation_value double [ not null ]
	p_value double

	indexes {
		(gene1_id, gene2_id, genomic_region_id_1, genomic_region_id_2) [ name: 'SP1_gene_fitness_correlation_unique_idx', unique ]
	}
}

Table SP3_mutant_growth_rate {
	id serial [ pk, unique ]
	gene_id integer [ not null ]
	genomic_region_id integer [ not null ]
	media_id integer [ not null ]
	experimental_condition_id integer
	replicate smallint [ not null ]
	tas_hit double
	doubling_rate_h double [ not null ]

	indexes {
		(gene_id, genomic_region_id, media_id, replicate) [ name: 'SP3_mutant_growth_unique_idx', unique ]
	}
}

Table compound {
	id serial [ pk, unique ]
	pubchem_id text
	name text [ not null ]
	molecular_formula text
	molecular_weight double
	smiles text
	inchi text
}

Table drug {
	id serial [ pk, unique ]
	compound_id integer
	name text [ not null ]
	drug_class text
	drug_subclass text
	notes text
}

Table SP5_drug_bacteria_metabolism {
  id serial [pk]
  strain_id integer
  drug_id integer
  compound_id integer  // optional reference
  drug_metabolism_percent float
  drug_metabolism_pval float
  drug_metabolism_fdr float
  metabolizer_classification text
  experimental_condition_id integer

	indexes {
		(strain_id, drug_id) [ name: 'SP5_drug_bacteria_metabolism_unique_idx', unique ]
	}
}

Table SP5_drug_bacteria_mic {
  id serial [pk]
  strain_id integer
  drug_id integer
  relation text
  mic_um float
  experimental_condition_id integer

	indexes {
		(strain_id, drug_id) [ name: 'SP5_drug_bacteria_mic_unique_idx', unique ]
	}
}

Table SP5_operon_prediction {
	id serial [ pk, unique ]
	strain_id integer [ not null ]
	gene_a_id integer [ not null ]
	gene_b_id integer [ not null ]
	operon_id text [ not null ]
	prediction_confidence double
	prediction_method text
	experimental_condition_id integer

	indexes {
		(strain_id, gene_a_id, gene_b_id) [ name: 'SP5_operon_prediction_unique_idx', unique ]
		(operon_id) [ name: 'SP5_operon_id_idx' ]
	}
}

Table gene_amr {
	id serial [ pk, unique ]
	gene_id integer [ not null ]
	genomic_region_id integer [ not null ]
	scope text
	element_type text
	element_subtype text
	drug_id integer
	uf_keyword text[]
	uf_ecnumber text

	indexes {
		(gene_id, genomic_region_id, drug_id) [ name: 'gene_amr_unique_idx', unique ]
	}

	Note: 'Why do we need this to be connected to gene and genomic region?'
}

Table SP2_protein_compound_interaction {
	id serial [ pk, unique ]
	protein_id integer [ not null ]
	compound_id integer [ not null ]
	ttp_score double
	fdr double
	hit_calling boolean [ not null ]
	experimental_condition_id integer

	indexes {
		(protein_id, compound_id) [ name: 'SP2_protein_compound_unique_idx', unique ]
	}
}

Table SP2_ppi_interaction {
	id serial [ pk, unique ]
	protein_id_a integer [ not null ]
	protein_id_b integer [ not null ]
	ds_score float
	tt_score float
	perturb_score float
	gp_score float
	melt_score float
	sec_score float
	bn_score float
	string_physical_score float
	operon_score float
	ecocyc_score float
	xlms_peptides text
	xlms_score text
	comelt_score float
	abundance_score float
	alphafold_score float
	drugs_score float
	ensemble_score float
	experimental_condition_id integer

	indexes {
		(protein_id_a, protein_id_b) [ name: 'SP2_ppi_unique_idx', unique ]
	}
}

Ref fk_strain_species_id_species {
	strain.species_id > species.id [ delete: no action, update: no action ]
}

Ref fk_strain_contigs_strain_id_strain {
	strain_contigs.strain_id > strain.id [ delete: no action, update: no action ]
}

Ref fk_genomic_region_strain_id_strain {
	genomic_region.strain_id > strain.id [ delete: no action, update: no action ]
}

Ref fk_gene_strain_id_strain {
	gene.strain_id > strain.id [ delete: no action, update: no action ]
}

Ref fk_gene_genomic_region_id_genomic_region {
	gene.genomic_region_id > genomic_region.id [ delete: no action, update: no action ]
}

Ref fk_gene_protein_id_protein {
	gene.protein_id > protein.id [ delete: no action, update: no action ]
}

Ref fk_gene_dbxref_gene_id_gene {
	gene_dbxref.gene_id > gene.id [ delete: no action, update: no action ]
}

Ref fk_gene_ontology_terms_gene_id_gene {
	gene_ontology_terms.gene_id > gene.id [ delete: no action, update: no action ]
}

Ref fk_experimental_condition_media_id_media {
	experimental_condition.media_id > media.id [ delete: no action, update: no action ]
}

Ref fk_drug_compound_id_compound {
	drug.compound_id > compound.id [ delete: no action, update: no action ]
}

Ref fk_SP1_gene_essentiality_gene_id_gene {
	SP1_gene_essentiality.gene_id > gene.id [ delete: no action, update: no action ]
}

Ref fk_SP1_gene_essentiality_genomic_region_id_genomic_region {
	SP1_gene_essentiality.genomic_region_id > genomic_region.id [ delete: no action, update: no action ]
}

Ref fk_SP1_gene_essentiality_experimental_condition_id_experimental_condition {
	SP1_gene_essentiality.experimental_condition_id > experimental_condition.id [ delete: no action, update: no action ]
}

Ref fk_SP1_gene_fitness_data_gene_id_gene {
	SP1_gene_fitness_data.gene_id > gene.id [ delete: no action, update: no action ]
}

Ref fk_SP1_gene_fitness_data_genomic_region_id_genomic_region {
	SP1_gene_fitness_data.genomic_region_id > genomic_region.id [ delete: no action, update: no action ]
}

Ref fk_SP1_gene_fitness_data_experimental_condition_id_experimental_condition {
	SP1_gene_fitness_data.experimental_condition_id > experimental_condition.id [ delete: no action, update: no action ]
}

Ref fk_SP1_gene_fitness_correlation_gene1_id_gene {
	SP1_gene_fitness_correlation.gene1_id > gene.id [ delete: no action, update: no action ]
}

Ref fk_SP1_gene_fitness_correlation_gene2_id_gene {
	SP1_gene_fitness_correlation.gene2_id > gene.id [ delete: no action, update: no action ]
}

Ref fk_SP1_gene_fitness_correlation_genomic_region_id_1_genomic_region {
	SP1_gene_fitness_correlation.genomic_region_id_1 > genomic_region.id [ delete: no action, update: no action ]
}

Ref fk_SP1_gene_fitness_correlation_genomic_region_id_2_genomic_region {
	SP1_gene_fitness_correlation.genomic_region_id_2 > genomic_region.id [ delete: no action, update: no action ]
}

Ref fk_SP1_gene_fitness_correlation_experimental_condition_id_experimental_condition {
	SP1_gene_fitness_correlation.experimental_condition_id > experimental_condition.id [ delete: no action, update: no action ]
}

Ref fk_SP2_protein_compound_interaction_protein_id_protein {
	SP2_protein_compound_interaction.protein_id > protein.id [ delete: no action, update: no action ]
}

Ref fk_SP2_protein_compound_interaction_compound_id_compound {
	SP2_protein_compound_interaction.compound_id > compound.id [ delete: no action, update: no action ]
}

Ref fk_SP2_protein_compound_interaction_experimental_condition_id_experimental_condition {
	SP2_protein_compound_interaction.experimental_condition_id > experimental_condition.id [ delete: no action, update: no action ]
}

Ref fk_SP2_ppi_interaction_protein_id_a_protein {
	SP2_ppi_interaction.protein_id_a > protein.id [ delete: no action, update: no action ]
}

Ref fk_SP2_ppi_interaction_protein_id_b_protein {
	SP2_ppi_interaction.protein_id_b > protein.id [ delete: no action, update: no action ]
}

Ref fk_SP2_ppi_interaction_experimental_condition_id_experimental_condition {
	SP2_ppi_interaction.experimental_condition_id > experimental_condition.id [ delete: no action, update: no action ]
}

Ref fk_SP3_mutant_growth_rate_gene_id_gene {
	SP3_mutant_growth_rate.gene_id > gene.id [ delete: no action, update: no action ]
}

Ref fk_SP3_mutant_growth_rate_genomic_region_id_genomic_region {
	SP3_mutant_growth_rate.genomic_region_id > genomic_region.id [ delete: no action, update: no action ]
}

Ref fk_SP3_mutant_growth_rate_media_id_media {
	SP3_mutant_growth_rate.media_id > media.id [ delete: no action, update: no action ]
}

Ref fk_SP3_mutant_growth_rate_experimental_condition_id_experimental_condition {
	SP3_mutant_growth_rate.experimental_condition_id > experimental_condition.id [ delete: no action, update: no action ]
}

Ref fk_SP5_drug_bacteria_metabolism_strain_id_strain {
	SP5_drug_bacteria_metabolism.strain_id > strain.id [ delete: no action, update: no action ]
}

Ref fk_SP5_drug_bacteria_metabolism_drug_id_drug {
	SP5_drug_bacteria_metabolism.drug_id > drug.id [ delete: no action, update: no action ]
}

Ref fk_SP5_drug_bacteria_metabolism_compound_id_compound {
	SP5_drug_bacteria_metabolism.compound_id > compound.id [ delete: no action, update: no action ]
}

Ref fk_SP5_drug_bacteria_metabolism_experimental_condition_id_experimental_condition {
	SP5_drug_bacteria_metabolism.experimental_condition_id > experimental_condition.id [ delete: no action, update: no action ]
}

Ref fk_SP5_drug_bacteria_mic_strain_id_strain {
	SP5_drug_bacteria_mic.strain_id > strain.id [ delete: no action, update: no action ]
}

Ref fk_SP5_drug_bacteria_mic_drug_id_drug {
	SP5_drug_bacteria_mic.drug_id > drug.id [ delete: no action, update: no action ]
}

Ref fk_SP5_drug_bacteria_mic_experimental_condition_id_experimental_condition {
	SP5_drug_bacteria_mic.experimental_condition_id > experimental_condition.id [ delete: no action, update: no action ]
}

Ref fk_SP5_operon_prediction_strain_id_strain {
	SP5_operon_prediction.strain_id > strain.id [ delete: no action, update: no action ]
}

Ref fk_SP5_operon_prediction_gene_a_id_gene {
	SP5_operon_prediction.gene_a_id > gene.id [ delete: no action, update: no action ]
}

Ref fk_SP5_operon_prediction_gene_b_id_gene {
	SP5_operon_prediction.gene_b_id > gene.id [ delete: no action, update: no action ]
}

Ref fk_SP5_operon_prediction_experimental_condition_id_experimental_condition {
	SP5_operon_prediction.experimental_condition_id > experimental_condition.id [ delete: no action, update: no action ]
}

Ref fk_gene_amr_gene_id_gene {
	gene_amr.gene_id > gene.id [ delete: no action, update: no action ]
}

Ref fk_gene_amr_genomic_region_id_genomic_region {
	gene_amr.genomic_region_id > genomic_region.id [ delete: no action, update: no action ]
}

Ref fk_gene_amr_drug_id_drug {
	gene_amr.drug_id > drug.id [ delete: no action, update: no action ]
}